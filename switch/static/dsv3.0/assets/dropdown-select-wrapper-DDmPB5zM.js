import{S as d,r as h,g as p,i as f,k as g,a as l,j as a}from"./index-C2PWchud.js";import{u as m}from"./utils-mixin-D5aAiqNi.js";import"./select-element-GuC7mP6J.js";import{w as v}from"./datasource-mixin-DMQBE4lo.js";import"./InputMixin-CGm-oGk-.js";const u=class extends m(d){static get is(){return"dropdown-select"}static get properties(){return{icon:String,title:String,selected:String,sectionSize:String}}getName(){return this.e.formName.split("=")[0]}validate(){return this.e.required&&!this.getValue()||this.getValue()===void 0?new this.Validation(!1,"invalid"):new this.Validation(!0,"valid")}valid(t){}invalid(t){}_dataJoined(t){const e=this;var i=[];return e.e.details.concat_exclude&&(i=e.e.details.concat_exclude.split(",")),t.filter(function(n,s){return!(s===0||i.includes(String(s))||e.cols.length&&e.cols[s].type==="href")}).join(" ")}dscDataName(){return this.e.defaultValue}firstUpdated(t){super.firstUpdated(t);const e=this;e.q="",e.currentGroups=e.groups,e.currentData=e.data}_computeItemsCount(t){return t.length}_shouldFilter(t){var e=this._computeItemsCount(t);return e>10}_computeItems(t,e){const i=[];for(let o=0;o<t.length;o++){const r=t[o];if(e){var n=e.toLowerCase(),s=r[1].toLowerCase();s.indexOf(n)!==-1&&i.push(r)}else i.push(r)}return i}checkSectionSizeHalf(){return this.sectionSize==="12|12|12"||this.sectionSize==="12|24|24"?!0:this.sectionSize==="12|12|24"}init(t,e){super.init(t,e);var i=this;i.required=this.e.required||t.min&&t.min>0,i.title=u.toTitleCase(t.name),i.icon=t.icon,i.params=i.pl.paramsCopy(),i.sectionSize=t.sectionSize,t.kind?this.selected=Number(t.kind):i.required&&i.rows.length>0&&(i.selected=i.rows[0][0]),i.loader=this.loadData()}};class c extends u{static get styles(){return[h(p),f`
				:host {
					display: block;
					height: 100%;
				}
			`]}static get properties(){return{selected:String,isLoading:Boolean,options:Array,e:{type:Object},rows:{type:Array},cols:{type:Array}}}constructor(){super(),this.e=null,this.selected="",this.isLoading=!1,this.options=[],this.rows=[],this.cols=[]}updated(e){(e.has("e")||e.has("cols"))&&(this.options=[],this.rows.forEach(i=>{let n={};i.forEach((s,o)=>{o===0?n.value=s:o===1?n.label=s:s===!0&&(this.selected=i[0])}),this.options=[...this.options,n]}),this.options.unshift({value:"",label:"--Please choose an option--"}))}getInput(){return this.shadowRoot.querySelector("select-element")}getValue(){return this.getInput().value}valid(e){this.getInput().setAttribute("validation",JSON.stringify({isValid:!0,validationMessage:"Field is empty"}))}invalid(e){this.getInput().setAttribute("validation",JSON.stringify({isValid:!1,validationMessage:"invalid"}))}render(){return g`
			<select-element .name=${this.e.name} .value=${this.selected} .isLoading=${this.isLoading} .options=${this.options}></select-element>
		`}}customElements.define(c.is,c);const S=t=>{const{element:e,groups:i,data:n,rows:s,cols:o}=t,r=l.useRef(null);return l.useEffect(()=>{r.current&&e&&(r.current.e=e,r.current.groups=i,r.current.data=n,r.current.rows=s,r.current.cols=o)},[e,s,o]),a.jsx(a.Fragment,{children:e?a.jsx("dropdown-select",{id:"dropdown-select",ref:r}):a.jsx("p",{children:"Loading data..."})})},D=v(S);export{D as default};
