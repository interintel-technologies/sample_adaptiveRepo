import{a as n,j as c}from"./index-C2PWchud.js";const w=({initialDuration:e,onTick:u,onEnd:t,title:a="Countdown ends in"})=>{const[f,l]=n.useState({}),[h,d]=n.useState(!1),p=n.useRef([]);n.useEffect(()=>{u&&typeof u=="function"&&p.current.push(u)},[u]);const x=n.useCallback(m=>{const s=parseInt(m,10),o=Math.floor(s/3600),r=Math.floor((s-o*3600)/60),i=s-o*3600-r*60;return{hours:o<10?`0${o}`:o,minutes:r<10?`0${r}`:r,seconds:i<10?`0${i}`:i}},[]),j=n.useCallback(()=>{if(h)return;d(!0);const m=Date.now();let s=e;if(s<=0){d(!1),l({hours:"00",minutes:"00",seconds:"00"}),t&&typeof t=="function"&&t();return}const o=()=>{s=e-Math.floor((Date.now()-m)/1e3),s>0?setTimeout(o,1e3):(s=0,d(!1),t&&typeof t=="function"&&t());const r=x(s);l(r),p.current.forEach(i=>i(r.minutes,r.seconds))};o()},[h,e,x,t]);return n.useEffect(()=>(e>0?j():l({hours:"00",minutes:"00",seconds:"00"}),()=>{d(!1)}),[j,e]),c.jsxs("div",{children:[c.jsx("h3",{children:a}),c.jsxs("p",{children:[f.hours,":",f.minutes,":",f.seconds]}),!h&&e<=0&&c.jsx("p",{children:"Countdown has already ended!"})]})},C=({element:e})=>{const u=n.useRef(null);n.useEffect(()=>{u.current&&e&&(u.current.e=e)},[e]);const t=a=>{const f=new Date(a);return Math.floor((f-new Date)/1e3)};return c.jsx(c.Fragment,{children:e?c.jsx(w,{initialDuration:t(e.defaultValue),onTick:(a,f)=>console.log(`Time left: ${a}:${f}`),onEnd:()=>console.log("Countdown has ended!"),title:e.name}):c.jsx("p",{children:"Loading data..."})})};export{C as default};
