import{S as h,r as g,g as p,i as f,k as m}from"./index-C2PWchud.js";import"./text-input-C-gOlH-_.js";import{u as v}from"./utils-mixin-D5aAiqNi.js";const l=class extends v(h){static get properties(){return{value:String,params:{type:Object,value:{}},type:String,columnSize:String,ColumnOffset:{type:Array}}}constructor(){super(),this.value=""}firstUpdated(i){super.firstUpdated(i)}getName(){return this.e.formName}getInput(){return this.shadowRoot.querySelector("text-input")}getValue(){return this.getInput().value}validate(){const i=/^(?:4[0-9]{12}(?:[0-9]{3})?)$/,e=/^(?:5[1-5][0-9]{14})$/,t=this.getValue().split(" ").join("");if(this.e.required){if(t.length!==16)return new this.Validation(!1,this.e.name+" Minimum of 16 Required");if(!i.test(t)&&!e.test(t))return new this.Validation(!1,"Card number entered is not valid")}return new this.Validation(!0,"valid")}static get is(){return"cc-input"}init(i,e){super.init(i,e);const t=this;t.title=l.toTitleCase(i.name),this.required=i.min&&i.min>0,this.name=i.name}};class u extends l{static get styles(){return[g(p),f`
                :host {
                    display: block;
                }
            `]}static get properties(){return{name:String,icon:String,hint:String,e:{type:Object}}}constructor(){super(),this.name="",this.icon="",this.hint="",this.e=null}updated(e){e.has("e")&&this.e&&(this.icon=this.e.icon)}valid(){this.getInput().setAttribute("validation",JSON.stringify({isValid:!0,validationMessage:"Valid card number"})),this.rightIcon={type:"adaptive-ui-icon",name:"MdError"}}invalid(e){this.getInput().setAttribute("validation",JSON.stringify({isValid:!1,validationMessage:e}))}onInputCCHandler(e){let t=e.detail.target.value;const a=t.split(" ").join("");if(a.length>0&&!isNaN(a)){const r=t.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),c=r&&r[0]||"",s=[];for(let n=0,d=c.length;n<d;n+=4)s.push(c.substring(n,n+4));if(s.length){const n=s.join("");this.ccTypeValidationIconLoader(n),t=s.join(" ")}else this.getInput().setAttribute("rightIcon",""),this.invalid("Invalid card number format")}else this.getInput().setAttribute("rightIcon",""),this.invalid("Card number contains invalid characters");return this.value=t,this.dispatchEvent(new CustomEvent("on-input",{bubbles:!0,composed:!0,detail:e})),t}ccTypeValidationIconLoader(e){const t=e.replace(/\D/g,""),a=/^4[0-9]{12}(?:[0-9]{3})?$/,o=/^5[1-5][0-9]{14}$|^2(?:2(?:2[1-9]|[3-9][0-9])|[3-6][0-9][0-9]|7(?:[01][0-9]|20))[0-9]{12}$/,r=/^3[47][0-9]{13}$/,c=/^6(?:011|5[0-9]{2})[0-9]{12}$/,s=/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,n=/^(?:2131|1800|35\d{3})\d{11}$/;a.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-visa"})),this.valid()):o.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-mastercard"})),this.valid()):r.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-amex"})),this.valid()):c.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-discover"})),this.valid()):s.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-diners-club"})),this.valid()):n.test(t)?(this.getInput().setAttribute("rightIcon",JSON.stringify({type:"fa-icon",name:"fa-brands fa-cc-jcb"})),this.valid()):(this.getInput().setAttribute("rightIcon",""),this.invalid("Card number is not valid"))}render(){return m`
            <text-input .e=${this.e} .hint=${this.hint} .id=${"ccInput"} .name=${this.name} 
                .leftIcon=${JSON.stringify({type:"adaptive-ui-icon",name:this.icon})} 
                @on-input=${e=>e.detail.target.value=this.onInputCCHandler(e)}>
            </text-input>
        `}}customElements.define(u.is,u);
