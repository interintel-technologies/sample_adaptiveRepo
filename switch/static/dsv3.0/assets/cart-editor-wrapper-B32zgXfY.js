import{O as _,T as W,a as t,Q as A,d as L,j as s,_ as M,U as I,V as P,x as G,W as H,X as K,Y as w}from"./index-C2PWchud.js";import"./cart-editor-BXlReNNz.js";import{w as z}from"./datasource-mixin-DMQBE4lo.js";import{e as B,s as F}from"./ecommerce-mixin-BZ3_9d38.js";import{D as Q,g as V,a as X,b as Y,c as q}from"./DialogContent-DMuq1MYF.js";import"./date-D9zgt7Gf.js";import"./InputMixin-CGm-oGk-.js";import"./utils-mixin-D5aAiqNi.js";import"./SectionTemplate-Drou2IoY.js";const J=["className","id"],Z=o=>{const{classes:e}=o;return P({root:["root"]},V,e)},$=_(W,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(o,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),ss=t.forwardRef(function(e,r){const n=A({props:e,name:"MuiDialogTitle"}),{className:a,id:i}=n,l=L(n,J),c=n,d=Z(c),{titleId:p=i}=t.useContext(Q);return s.jsx($,M({component:"h2",className:I(d.root,a),ownerState:c,ref:r,variant:"h6",id:i??p},l))}),ts=({element:o,rows:e,cols:r,call:n})=>{const a=t.useRef(null),[i,l]=t.useState(!1),[c,d]=t.useState(""),[p,u]=t.useState("success"),[b,h]=t.useState(!1),[T,E]=t.useState(""),[k,v]=t.useState(""),[x,O]=t.useState(null);t.useEffect(()=>{a.current&&o&&(a.current.e=o,a.current.rows=e,a.current.cols=r)},[o,e,r]),t.useEffect(()=>{const y=async S=>{const{service:R,params:U,Cart:j}=S.detail;console.log("submit-cart event data:",S.detail),j&&B.dispatch(F(j));try{const f=await n(R,U);console.log("response is ",f.response.response_status);const m=f.response.response_status;let g;m==="00"?(g=window.NO_NETWORKING?"Updated offline":"Updated successfully",u("success")):(g="Update failed",u("error")),d(g)}catch{const m=window.NO_NETWORKING?"Updated offline":"Update failed";d(m),u("error")}finally{l(!0)}};return window.addEventListener("submit-cart",y),()=>{window.removeEventListener("submit-cart",y)}},[n]);const C=()=>{l(!1)},D=()=>{h(!1),E(""),v(""),O(null)},N=async()=>{h(!1),x&&await x()};return s.jsxs(s.Fragment,{children:[s.jsx(H,{open:i,autoHideDuration:4e3,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:s.jsx(K,{onClose:C,severity:p,sx:{width:"100%"},children:c})}),s.jsxs(X,{open:b,onClose:D,children:[s.jsx(ss,{children:T}),s.jsx(Y,{children:k}),s.jsxs(q,{children:[s.jsx(w,{onClick:D,color:"primary",children:"Cancel"}),s.jsx(w,{onClick:N,color:"primary",children:"Confirm"})]})]}),o&&e&&r?s.jsx("cart-editor",{id:"cart-editor",ref:a}):s.jsx("p",{children:"Loading data..."})]})},ps=G(z(ts));export{ps as default};
