import{S as u,r as c,g as h,k as p,a as l,j as d}from"./index-C2PWchud.js";import{u as m}from"./utils-mixin-D5aAiqNi.js";import{E as v}from"./ecommerce-mixin-BZ3_9d38.js";import"./cart-editor-BXlReNNz.js";import{w as f}from"./datasource-mixin-DMQBE4lo.js";import"./SectionTemplate-Drou2IoY.js";import"./date-D9zgt7Gf.js";import"./InputMixin-CGm-oGk-.js";class o extends v(m(u)){static get properties(){return{value:Object}}constructor(){super(),this.value=void 0}getName(){return this.e.formName.split("=")[0]}getValue(){return this.value}validate(){return new this.Validation(!0,"valid")}valid(t){}invalid(t){}dscDataName(){return this.e.defaultValue}init(t,e){super.init(t,e),this.required=this.e.required||t.min&&t.min>0,this.title=o.toTitleCase(t.name),this.icon=t.icon,this.params=this.pl.paramsCopy(),this.sectionSize=t.sectionSize,this.loader=this.loadData()}}class n extends o{static get properties(){return{cart:Array}}static get styles(){return[c(h)]}firstUpdated(){this.fetchCart()}onCartUpdatedHandler(t){const e=Object.keys(t.detail)[0];if(this.value){const i=this.value.findIndex(a=>a[e]===t.detail[e]),r=this.value[i];if(r){const a=[...this.value];r.quantity=t.detail.quantity,a.splice(i,1,r),this.value=[...a]}else this.value=[...this.value,t.detail]}else this.value=[t.detail];this.updateCartItemQuantity(t.detail[e],t.detail.quantity,"cart")}static get is(){return"purchase-order-editor"}render(){return p`
            <div class="content">
                <cart-editor id="cartEditor" .cart=${this.cart} .e=${this.e} .pl=${this.pl} @cartUpdated=${t=>this.onCartUpdatedHandler(t)}></cart-editor>
            </div>
        `}}customElements.define(n.is,n);const x=s=>{const{element:t,rows:e,paramsCallback:i}=s,r=l.useRef(null);return l.useEffect(()=>{r.current&&t&&(r.current.e=t,r.current.rows=e)},[t,e,s,i]),d.jsx("div",{children:t?d.jsx("purchase-order-editor",{id:"purchase-order-editor",ref:r}):d.jsx("p",{children:"Loading data..."})})},k=f(x);export{k as default};
