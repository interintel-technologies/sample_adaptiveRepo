{% load interface_tags %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="generator" content="Adaptive Ui Web">
		<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
		<title>{{params.response.get_gateway_details.name }}</title>
		<meta name="description" content="{{params.response.get_gateway_details.tagline}}">

		<!--
		The `<base>` tag below is present to support two advanced deployment options:
		1) Differential serving. 2) Serving from a non-root path.

		Instead of manually editing the `<base>` tag yourself, you should generally either:
		a) Add a `basePath` property to the build configuration in your `polymer.json`.
		b) Use the `--base-path` command-line option for `polymer build`.
		-->
		<base href="/static/dsv2.0/">
		<link rel="icon" href="/media/{% if params.response.get_gateway_details.icon_image %}{{params.response.get_gateway_details.icon_image}}{% else %}upc_institution_icon_image/InterIntel_Icon.png{% endif %}">

		<!-- See https://goo.gl/OOhYW5 -->
		<link rel="manifest" href="/manifest/">

		<!-- See https://goo.gl/qRE0vM -->
		<meta name="theme-color" content="{{params.response.get_gateway_details.default_color}}">

		<!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="application-name" content="Adaptive Ui">

		<!-- Add to homescreen for Safari on iOS -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="Adaptive Ui">

		<!-- Homescreen icons -->
		<link rel="apple-touch-icon" href="images/manifest/icon-48x48.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/manifest/icon-72x72.png">
		<link rel="apple-touch-icon" sizes="96x96" href="images/manifest/icon-96x96.png">
		<link rel="apple-touch-icon" sizes="144x144" href="images/manifest/icon-144x144.png">
		<link rel="apple-touch-icon" sizes="192x192" href="images/manifest/icon-192x192.png">

		<!-- Tile icon for Windows 8 (144x144 + tile color) -->
		<meta name="msapplication-TileImage" content="images/manifest/icon-144x144.png">
		<meta name="msapplication-TileColor" content="#3f51b5">
		<meta name="msapplication-tap-highlight" content="no">

		<!-- Default twitter cards -->
		<meta name="twitter:card" content="summary">
		<meta name="twitter:site" content="@username">
		<meta name="twitter:title" content="{{params.response.get_gateway_details.name }}"/>
		<meta name="twitter:description" content="{{params.response.get_gateway_details.tagline}}" />
		<meta name="twitter:image" content="/media/{% if params.response.get_gateway_details.icon_image %}{{params.response.get_gateway_details.icon_image}}{% else %}upc_institution_icon_image/InterIntel_Icon.png{% endif %}" />

		<meta property="og:type" content="website">
		<meta property="og:site_name" content="adaptive-ui">
		<meta property="og:image" content="images/manifest/icon-144x144.png">

		<!-- Performace tip: hint to the browser to start the handshake for the fonts site -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Lato:wght@400;700&family=Montserrat:wght@400;700&family=Poppins:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.css" integrity="sha512-FA9cIbtlP61W0PRtX36P6CGRy0vZs0C2Uw26Q1cMmj3xwhftftymr0sj8/YeezDnRwL9wtWw8ZwtCiTDXlXGjQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<script>
			(function(a){function b(a){return q.typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?b=function(a){return typeof a}:b=function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(a)}function c(a){function b(d,e){try{var f=a[d](e),g=f.value,h=g instanceof q.AwaitValue;Promise.resolve(h?g.wrapped:g).then(function(a){return h?void b("next",a):void c(f.done?"return":"normal",a)},function(a){b("throw",a)})}catch(a){c("throw",a)}}function c(a,c){switch(a){case"return":d.resolve({value:c,done:!0});break;case"throw":d.reject(c);break;default:d.resolve({value:c,done:!1});}d=d.next,d?b(d.key,d.arg):e=null}var d,e;this._invoke=function(a,c){return new Promise(function(f,g){var h={key:a,arg:c,resolve:f,reject:g,next:null};e?e=e.next=h:(d=e=h,b(a,c))})},"function"!==typeof a.return&&(this.return=void 0)}function d(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function e(a,b){for(var c in b){var d=b[c];d.configurable=d.enumerable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,c,d)}if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(b),f=0;f<e.length;f++){var g=e[f],d=b[g];d.configurable=d.enumerable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,g,d)}return a}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(){return q.extends=g=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},g.apply(this,arguments)}function h(a){return q.getPrototypeOf=h=Object.getPrototypeOf||function(a){return a.__proto__},h(a)}function i(a,b){return q.setPrototypeOf=i=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},i(a,b)}function j(){return q.construct="undefined"!==typeof Reflect&&Reflect.construct?j=Reflect.construct:j=function(b,c,d){var e=[null];e.push.apply(e,c);var a=b.bind.apply(b,e),f=new a;return d&&q.setPrototypeOf(f,d.prototype),f},j.apply(null,arguments)}function k(a){var b="function"===typeof Map?new Map:void 0;return q.wrapNativeSuper=k=function(a){function c(){}if("function"!==typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),q.setPrototypeOf(c,q.setPrototypeOf(function(){return q.construct(a,arguments,q.getPrototypeOf(this).constructor)},a))},k(a)}function l(a,b,c){return q.get="undefined"!==typeof Reflect&&Reflect.get?l=Reflect.get:l=function(a,b,c){var d=q.superPropBase(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}},l(a,b,c||a)}function m(a,b,c,d){return m="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(a,b,c,d){var e,f=q.superPropBase(a,b);if(f){if(e=Object.getOwnPropertyDescriptor(f,b),e.set)return e.set.call(d,c),!0;if(!e.writable)return!1}if(e=Object.getOwnPropertyDescriptor(d,b),e){if(!e.writable)return!1;e.value=c,Object.defineProperty(d,b,e)}else q.defineProperty(d,b,c);return!0},m(a,b,c,d)}function n(a,b,c,d,e){const f=m(a,b,c,d||a);if(!f&&e)throw new Error("failed to set property");return c}function o(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}var q=a.babelHelpers={};q.typeof=b,q.asyncIterator=function(a){var b;if("function"===typeof Symbol){if(Symbol.asyncIterator&&(b=a[Symbol.asyncIterator],null!=b))return b.call(a);if(Symbol.iterator&&(b=a[Symbol.iterator],null!=b))return b.call(a)}throw new TypeError("Object is not async iterable")},q.AwaitValue=function(a){this.wrapped=a},"function"===typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(a){return this._invoke("next",a)},c.prototype.throw=function(a){return this._invoke("throw",a)},c.prototype.return=function(a){return this._invoke("return",a)},q.AsyncGenerator=c,q.wrapAsyncGenerator=function(a){return function(){return new q.AsyncGenerator(a.apply(this,arguments))}},q.awaitAsyncGenerator=function(a){return new q.AwaitValue(a)},q.asyncGeneratorDelegate=function(a,b){function c(c,d){return e=!0,d=new Promise(function(b){b(a[c](d))}),{done:!1,value:b(d)}}var d={},e=!1;return"function"===typeof Symbol&&Symbol.iterator&&(d[Symbol.iterator]=function(){return this}),d.next=function(a){return e?(e=!1,a):c("next",a)},"function"===typeof a.throw&&(d.throw=function(a){if(e)throw e=!1,a;return c("throw",a)}),"function"===typeof a.return&&(d.return=function(a){return c("return",a)}),d},q.asyncToGenerator=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a,b){try{var c=i[a](b),f=c.value}catch(a){return void e(a)}c.done?d(f):Promise.resolve(f).then(g,h)}function g(a){f("next",a)}function h(a){f("throw",a)}var i=a.apply(b,c);g()})}},q.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},q.createClass=function(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a},q.defineEnumerableProperties=e,q.defaults=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f)}return a},q.defineProperty=f,q.extends=g,q.objectSpread=function(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){q.defineProperty(a,b,c[b])})}return a},q.inherits=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");q.setPrototypeOf(a.prototype,b&&b.prototype),b&&q.setPrototypeOf(a,b)},q.getPrototypeOf=h,q.setPrototypeOf=i,q.construct=j,q.wrapNativeSuper=k,q.instanceof=function(a,b){return null!=b&&"undefined"!==typeof Symbol&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):a instanceof b},q.interopRequireDefault=function(a){return a&&a.__esModule?a:{default:a}},q.interopRequireWildcard=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b},q.newArrowCheck=function(a,b){if(a!==b)throw new TypeError("Cannot instantiate an arrow function")},q.objectDestructuringEmpty=function(a){if(null==a)throw new TypeError("Cannot destructure undefined")},q.objectWithoutProperties=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(d=0;d<g.length;d++)c=g[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e},q.assertThisInitialized=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},q.possibleConstructorReturn=function(a,b){return b&&("object"===typeof b||"function"===typeof b)?b:q.assertThisInitialized(a)},q.superPropBase=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=q.getPrototypeOf(a),null!==a););return a},q.get=l,q.set=n,q.taggedTemplateLiteral=function(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))},q.temporalRef=function(a,b){if(a===q.temporalUndefined)throw new ReferenceError(b+" is not defined - temporal dead zone");else return a},q.readOnlyError=function(a){throw new Error("\""+a+"\" is read-only")},q.temporalUndefined={},q.slicedToArray=function(a,b){return q.arrayWithHoles(a)||q.iterableToArrayLimit(a,b)||q.nonIterableRest()},q.toArray=function(a){return q.arrayWithHoles(a)||q.iterableToArray(a)||q.nonIterableRest()},q.toConsumableArray=function(a){return q.arrayWithoutHoles(a)||q.iterableToArray(a)||q.nonIterableSpread()},q.arrayWithoutHoles=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}},q.arrayWithHoles=function(a){if(Array.isArray(a))return a},q.iterableToArray=o,q.iterableToArrayLimit=function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c},q.nonIterableSpread=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")},q.nonIterableRest=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")},q.toPropertyKey=function(a){return"symbol"===typeof a?a:a+""}})("undefined"===typeof global?self:global)
		</script>
		<!-- Service Worker -->
			{% if request.is_secure %}
			<script>
				if("serviceWorker" in navigator){
				window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker.js",{scope:"/"})})
				}
			</script>
		{% endif %}
		<script>window.process={env:{NODE_ENV:"production"}};</script>

		{% if params.response.get_gateway_details.google_tag_code  %}
			<!-- Google Tag Manager -->
				<script>
				(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
				j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
				'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
				})(window,document,'script','dataLayer','{{params.response.get_gateway_details.google_tag_code}}');
				</script>
			<!-- End Google Tag Manager -->
		{% endif %}
		{% if params.response.get_gateway_details.google_analytics_code  %}
			<!-- Google Analytics -->
				<script>
					(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
					})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

					ga('create', '{{params.response.get_gateway_details.google_analytics_code}}', 'auto');
					ga('send', 'pageview');
				</script>
			<!-- End Google Analytics -->
		{% endif %}

		{% if params.response.get_gateway_details.facebook_pixel_code  %}
			<!-- Facebook Pixel Code -->
			<script>
				!function(f,b,e,v,n,t,s)
				{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
				n.callMethod.apply(n,arguments):n.queue.push(arguments)};
				if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
				n.queue=[];t=b.createElement(e);t.async=!0;
				t.src=v;s=b.getElementsByTagName(e)[0];
				s.parentNode.insertBefore(t,s)}(window,document,'script',
				'https://connect.facebook.net/en_US/fbevents.js');
				fbq('init', '{{params.response.get_gateway_details.facebook_pixel_code}}'); 
				fbq('track', 'PageView');
			</script>
			<noscript>
				<img height="1" width="1" src="https://www.facebook.com/tr?id=335821467507374&ev=PageView&noscript=1"/>
			</noscript>
			<!-- End Facebook Pixel Code -->
		{% endif %}
		<script type="text/javascript" src="https://cdn.ywxi.net/js/1.js" async></script>
		<!-- Add any global styles for body, document, etc. -->
	</head>
	<body>
		{% if params.response.get_gateway_details.google_tag_code  %}
			<!-- Google Tag Manager (noscript) -->
			<noscript>
				<iframe src="https://www.googletagmanager.com/ns.html?id={{params.response.get_gateway_details.google_tag_code}}" height="0" width="0" style="display:none;visibility:hidden"></iframe>
			</noscript>
			<!-- End Google Tag Manager (noscript) -->
		{% endif %}

		<adaptive-ui template="landing-2" path="{{page}}" csrftoken="{{csrf_token}}" params="{{request|jsonify}}" 
			payloadjson="{{params|jsonify}}" apptitle="{{params.response.get_gateway_details.name}}"
		>
			<!--
				Placeholder Content: This content will be replaced when <adaptive-ui>
				is rendered.

				Placeholder content improves perceived render time and makes sure
				users with JavaScript disabled will see something helpful.
			-->
			<style>
				.loader {
					border: 5px solid #f3f3f3;
					border-radius: 50%;
					border-top: 5px solid #3498db;
					width: 50px;
					height: 50px;
					-webkit-animation: spin 2s linear infinite; /* Safari */
					animation: spin 2s linear infinite;
				}
				/* Safari */
				@-webkit-keyframes spin {
					0% { -webkit-transform: rotate(0deg); }
					100% { -webkit-transform: rotate(360deg); }
				}
				@keyframes spin {
					0% { transform: rotate(0deg); }
					100% { transform: rotate(360deg); }
				}
				.page-loader-wrapper{
					position: absolute;
					width: 100%;
					height: 100vh;
					background-color: #fff;
					z-index: 9999;
					display: flex;
					align-items: center;
					justify-content: center;
					overflow: hidden;
				}
			</style>

			<div class="page-loader-wrapper">
				<div class="loader"></div>
			</div>

			<noscript>
				Please enable JavaScript to view this website.
			</noscript>
		</adaptive-ui>

		<script type="text/javascript">window.THEME = 'dsv2.0'</script>
		<!-- Load webcomponents-loader.js to check and load any polyfills your browser needs -->
		<!-- /static/adaptive-ui-web/ -->
		<script src="/static/dsv2.0/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
		<!-- Built with love using PWA Starter Kit -->

		<!-- /static/adaptive-ui-web/ -->
		<script type="module" src='/static/dsv2.0/src/components/adaptive-ui.js'></script>
		<script>
			function subscribe() {
				// Disable the button so it can't be changed while
				// we process the permission request
				//var pushButton = document.querySelector('.js-push-button');
				//pushButton.disabled = true;

				navigator.serviceWorker.ready.then(serviceWorkerRegistration => {
				serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly: true}).then(subscription => {
					// The subscription was successful
					//isPushEnabled = true;
					//pushButton.textContent = 'Disable Push Messages';
					//pushButton.disabled = false;

					// TODO: Send the subscription subscription.endpoint
					// to your server and save it to send a push message
					// at a later date
					return true; //sendSubscriptionToServer(subscription);
				}).catch(e => {
					if (Notification.permission === 'denied') {
					// The user denied the notification permission which
					// means we failed to subscribe and the user will need
					// to manually change the notification permission to
					// subscribe to push messages
					console.log('Permission for Notifications was denied');
					// pushButton.disabled = true;
					} else {
					// A problem occurred with the subscription, this can
					// often be down to an issue or lack of the gcm_sender_id
					// and / or gcm_user_visible_only
					console.log('Unable to subscribe to push.', e);
					// pushButton.disabled = false;
					// pushButton.textContent = 'Enable Push Messages';
					}
				});
				});
			}

			subscribe();
		</script>
		<!-- Sentry Exception Tracking -->
		<script type="module">
		import * as Sentry from './node_modules/@sentry/browser/esm/index.js';
		if (window.process['env']['NODE_ENV'] === 'production') {
			Sentry.init({dsn: 'https://c1d4eca95ac7417eaa4a09a16b4b2cf9@sentry.io/1272205'});
		}
		</script>
		  <script type="module" crossorigin src="/static/dsv3.0/assets/main.js"></script>
	</body>
</html>
