{
  "version": 3,
  "sources": ["../../node_modules/pwa-helpers/src/router.ts"],
  "sourcesContent": ["/**\n@license\nCopyright (c) 2018 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Basic router that calls a callback whenever the location is updated.\n\n  Example:\n\n      import { installRouter } from 'pwa-helpers/router.js';\n\n      installRouter((location) => handleNavigation(location));\n\n  For example, if you're using this router in a Redux-connected component,\n  you could dispatch an action in the callback:\n\n      import { installRouter } from 'pwa-helpers/router.js';\n      import { navigate } from '../actions/app.js';\n\n      installRouter((location) => store.dispatch(navigate(location)))\n\n  If you need to force a navigation to a new location programmatically, you can\n  do so by pushing a new state using the History API, and then manually\n  calling the callback with the new location:\n\n      window.history.pushState({}, '', '/new-route');\n      handleNavigation(window.location);\n\n  Optionally, you can use the second argument to read the event that caused the\n  navigation. For example, you may want to scroll to top only after a link click.\n\n      installRouter((location, event) => {\n        // Only scroll to top on link clicks, not popstate events.\n        if (event && event.type === 'click') {\n          window.scrollTo(0, 0);\n        }\n        handleNavigation(location);\n      });\n*/\nexport const installRouter = (locationUpdatedCallback: (location:Location, event: Event|null) => void) => {\n  document.body.addEventListener('click', e => {\n    if (e.defaultPrevented || e.button !== 0 ||\n        e.metaKey || e.ctrlKey || e.shiftKey) return;\n\n    const anchor = e.composedPath().filter(\n      n => (n as HTMLElement).tagName === 'A'\n    )[0] as HTMLAnchorElement | undefined;\n    if (!anchor || anchor.target ||\n        anchor.hasAttribute('download') ||\n        anchor.getAttribute('rel') === 'external') return;\n\n    const href = anchor.href;\n    if (!href || href.indexOf('mailto:') !== -1) return;\n\n    const location = window.location;\n    const origin = location.origin || location.protocol + '//' + location.host;\n    if (href.indexOf(origin) !== 0) return;\n\n    e.preventDefault();\n    if (href !== location.href) {\n      window.history.pushState({}, '', href);\n      locationUpdatedCallback(location, e);\n    }\n  });\n\n  window.addEventListener('popstate', e => locationUpdatedCallback(window.location, e));\n  locationUpdatedCallback(window.location, null /* event */);\n};\n"],
  "mappings": ";;;AA6CO,IAAM,gBAAgB,CAAC,4BAA2E;AACvG,WAAS,KAAK,iBAAiB,SAAS,OAAI;AAC1C,QAAI,EAAE,oBAAoB,EAAE,WAAW,KACnC,EAAE,WAAW,EAAE,WAAW,EAAE;AAAU;AAE1C,UAAM,SAAS,EAAE,aAAY,EAAG,OAC9B,OAAM,EAAkB,YAAY,GAAG,EACvC,CAAC;AACH,QAAI,CAAC,UAAU,OAAO,UAClB,OAAO,aAAa,UAAU,KAC9B,OAAO,aAAa,KAAK,MAAM;AAAY;AAE/C,UAAM,OAAO,OAAO;AACpB,QAAI,CAAC,QAAQ,KAAK,QAAQ,SAAS,MAAM;AAAI;AAE7C,UAAM,WAAW,OAAO;AACxB,UAAM,SAAS,SAAS,UAAU,SAAS,WAAW,OAAO,SAAS;AACtE,QAAI,KAAK,QAAQ,MAAM,MAAM;AAAG;AAEhC,MAAE,eAAc;AAChB,QAAI,SAAS,SAAS,MAAM;AAC1B,aAAO,QAAQ,UAAU,CAAA,GAAI,IAAI,IAAI;AACrC,8BAAwB,UAAU,CAAC;;EAEvC,CAAC;AAED,SAAO,iBAAiB,YAAY,OAAK,wBAAwB,OAAO,UAAU,CAAC,CAAC;AACpF;IAAwB,OAAO;IAAU;;EAAgB;AAC3D;",
  "names": []
}
